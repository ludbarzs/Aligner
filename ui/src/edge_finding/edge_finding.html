<!doctype html>
<html>
  <head>
    <title>Aligner</title>
    <link rel="stylesheet" href="../styles/styles.css" />
    <link rel="stylesheet" href="edge_finding.css" />
  </head>
  <body>
    <div class="top-buttons">
      <button
        class="control-button upload-button"
        onclick="window.location.href='../image_upload/image_upload.html'"
      >
        Upload New Image
      </button>
      <div class="auth-buttons">
        <button class="auth-button login-button">Login</button>
        <button class="auth-button signup-button">Sign Up</button>
      </div>
    </div>

    <div class="container">
      <div class="main-content">
        <div class="box">
          <!-- Add message for when no image is loaded -->
          <div class="no-image-message" style="display: none">
            <p>No image found. Redirecting to upload page...</p>
          </div>

          <!-- Add image container -->
          <div class="image-container" style="display: none">
            <div class="image-wrapper">
              <img id="edge-image" style="display: none" />
            </div>
          </div>
        </div>
      </div>

      <div class="controls-container">
        <div class="controls-left">
          <button
            class="control-button"
            onclick="window.location.href='../corner_selection/corner_selection.html'"
          >
            <span>Back</span>
          </button>
        </div>

        <!-- Edge detection settings -->
        <div id="edge-settings" class="edge-settings-container">
          <div class="settings-inputs">
            <div class="setting-input-group">
              <span class="info-icon"
                >i<span class="tooltip"
                  >Applies Gaussian blur to reduce noise in the image before
                  edge detection. Higher values create smoother edges but may
                  miss details.</span
                ></span
              >
              <span class="setting-label">Blur</span>
              <input
                type="range"
                id="blur-setting"
                min="3"
                max="15"
                step="2"
                value="5"
              />
              <span class="setting-value" id="blur-value">5</span>
            </div>
            <div class="setting-input-group">
              <span class="info-icon"
                >i<span class="tooltip"
                  >Controls how easily edges are detected. Lower values detect
                  only strong edges, higher values include more subtle
                  edges.</span
                ></span
              >
              <span class="setting-label">Edge Sensitivity</span>
              <input
                type="range"
                id="edge-sensitivity"
                min="30"
                max="200"
                step="5"
                value="130"
              />
              <span class="setting-value" id="sensitivity-value">130</span>
            </div>
            <div class="setting-input-group">
              <span class="info-icon"
                >i<span class="tooltip"
                  >Connects nearby edges to form continuous lines. Higher values
                  bridge larger gaps but may connect unrelated edges.</span
                ></span
              >
              <span class="setting-label">Edge Closing</span>
              <input
                type="range"
                id="edge-closing"
                min="1"
                max="21"
                list="closing-steps"
                setp="2"
                value="5"
              />
              <span class="setting-value" id="closing-value">5</span>
            </div>
          </div>
          <div class="reset-settings-container">
            <button class="control-button reset-settings-button">
              Reset to Default
            </button>
          </div>
          <div class="save-settings-container" style="display: none;">
            <label class="save-settings-label">
              <input type="checkbox" id="save-settings-checkbox">
              Save settings to account
            </label>
          </div>
        </div>

        <div class="controls-right">
          <button class="control-button primary">
            <span>Export</span>
          </button>
        </div>
      </div>
    </div>
    <script type="module" src="scripts/edge_finding.js"></script>
  </body>
</html>
